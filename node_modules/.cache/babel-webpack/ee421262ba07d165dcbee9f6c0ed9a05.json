{"ast":null,"code":"import _asyncToGenerator from \"/home/dileep/workspace/cgh-Booking-engine/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { debounceTime, map, startWith } from 'rxjs/operators';\nimport * as moment from 'moment';\nimport { DateRange } from '@angular/material/datepicker';\nimport { DropdownType } from 'src/app/shared/models/dropdown-type';\nimport { formatDate } from '@angular/common';\nlet SearchComponent = class SearchComponent {\n  constructor(searchService, formBuilder, activatedRoute, router, spinner, dealsService, bookingService, BookingConfigService) {\n    this.searchService = searchService;\n    this.formBuilder = formBuilder;\n    this.activatedRoute = activatedRoute;\n    this.router = router;\n    this.spinner = spinner;\n    this.dealsService = dealsService;\n    this.bookingService = bookingService;\n    this.BookingConfigService = BookingConfigService;\n    this.dropdownType = DropdownType;\n    this.age = new Map();\n    this.agesArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17];\n    this.hotelsList = [];\n    this.locationList = [];\n    this.bookingItems = [];\n\n    this.clearFormArray = formArray => {\n      formArray = this.formBuilder.array([]);\n    };\n\n    this.selectedRangeValueChange = new EventEmitter();\n    this.now = new Date();\n    this.secondCalStartDate = new Date(this.now.getFullYear(), this.now.getMonth() + 1, 1);\n    this.dateRangeSelectionType = 'exact';\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    this.bookingCart$ = this.bookingService.bookingCart$;\n    this.bookingCart$.subscribe(res => {\n      this.bookingItems = res === null || res === void 0 ? void 0 : res.bookingItems;\n    });\n    this.bookingService.cartflag = false;\n    this.minDate = new Date();\n    this.searchForm = this.getsearchForm();\n    console.log(this.searchForm.value, this.searchForm.controls.paxData.value[0].noOfAdults);\n    this.getWithExpiry();\n    console.log(this.searchForm, \"searchform\");\n    this.filteredHotelsList = this.searchForm.controls.hotel.valueChanges.pipe(startWith(''), map(value => this.filterHotel(value)));\n    this.filteredLocationList = this.searchForm.controls.hotel.valueChanges.pipe(startWith(''), map(value => this.filterLocation(value)));\n    this.activateRouteSubscription$ = this.activatedRoute.queryParams.pipe(debounceTime(300)).subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (queryParams) {\n        if (!queryParams['checkIn']) {\n          localStorage.removeItem('reflectStore');\n        }\n\n        if (queryParams['checkIn']) {\n          _this.roomCount = queryParams['rooms'];\n\n          _this.searchForm.controls.checkIn.setValue(queryParams['checkIn']);\n\n          _this.searchForm.controls.checkOut.setValue(queryParams['checkOut']);\n\n          _this.searchForm.controls.cityId.setValue(queryParams['cityId'] || '');\n\n          _this.searchForm.controls.stateId.setValue(queryParams['stateId']);\n\n          _this.searchForm.controls.countryId.setValue(queryParams['countryId']);\n\n          _this.searchForm.controls.searchType.setValue(queryParams['searchType'] || 'hotel');\n\n          yield _this.setHotelName(parseInt(queryParams['productId']));\n\n          _this.setLocation(queryParams['cityId'], queryParams['stateId']);\n\n          _this.setPaxInfo(queryParams['paxInfo']);\n\n          _this.fetchSearchResult();\n\n          _this.searchForm.controls.rooms.setValue(Number(localStorage.getItem('rooms')));\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  } // increment() {\n  //   // this.roomCount++\n  //   // this.roomCountChanged()\n  //   let current = this.searchForm.controls.rooms.value;\n  //   this.searchForm.controls.rooms.setValue(current + 1);\n  //   this.roomCount = this.searchForm.controls.rooms.value\n  // }\n  // decrement() {\n  //   // if (this.roomCount > 1) {\n  //   //   this.roomCount--\n  //   //   this.roomCountChanged()\n  //   // }\n  //   let current = this.searchForm.controls.rooms.value;\n  //   if (current > 1) {\n  //     this.searchForm.controls.rooms.setValue(current - 1);\n  //     this.roomCount = this.searchForm.controls.rooms.value\n  //   }\n  // }\n  // roomCountChanged() {\n  //   this.data = []\n  //   for (var i = 0; i < this.roomCount; i++) {\n  //     this.data.push({\n  //       numOfAdults: 0,\n  //       numOfChildren: 0,\n  //       childAges: []\n  //     })\n  //   }\n  // }\n  // adultCountChanged(index: number, value: any) {\n  //   this.data[index].numOfAdults = parseFloat(value)\n  // }\n  // childCountChanged(index: number, value: any) {\n  //   this.data[index].numOfChildren = parseFloat(value)\n  //   this.data[index].childAges = []\n  //   for (var i = 0; i < value; i++) {\n  //     this.data[index].childAges.push(0)\n  //   }\n  // }\n  // onChildAgeChange(roomIndex: any, childIndex: any, value: any) {\n  //   //console.log(roomIndex, childIndex, value)\n  //   this.data[roomIndex].childAges[childIndex] = parseFloat(value)\n  //   //console.log(this.data)\n  // }\n  // incrementAdult(room: { numOfAdults: number; }) {\n  //   room.numOfAdults++\n  // }\n  // decrementAdult(room: { numOfAdults: number; }) {\n  //   if (room.numOfAdults > 1) {\n  //     room.numOfAdults--\n  //   }\n  // }\n  // incrementChild(room: { numOfChildren: number; childAges: number[]; }) {\n  //   room.numOfChildren++\n  //   room.childAges = []\n  //   for (var i = 0; i < room.numOfChildren; i++) {\n  //     room.childAges.push(0)\n  //   }\n  // }\n  // decrementChild(room: { numOfChildren: number; childAges: number[]; }) {\n  //   if (room.numOfChildren > 0) {\n  //     room.numOfChildren--\n  //     room.childAges = []\n  //     for (var i = 0; i < room.numOfChildren; i++) {\n  //       room.childAges.push(0)\n  //     }\n  //   }\n  // }\n\n\n  ngOnDestroy() {\n    var _a;\n\n    (_a = this.searchTypeControlSubscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n  }\n\n  getsearchForm() {\n    let dt = formatDate(new Date(), 'dd/MM/yyyy', 'en');\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    let dtTom = formatDate(tomorrow, 'dd/MM/yyyy', 'en');\n    console.log(dtTom);\n    return this.formBuilder.group({\n      searchType: [],\n      hotel: [''],\n      location: [''],\n      cityId: [''],\n      stateId: [''],\n      countryId: [''],\n      checkIn: [dt, Validators.required],\n      checkOut: [dtTom, Validators.required],\n      noOfAdults: [1],\n      agesOfChildren: this.formBuilder.array([]),\n      rooms: [1],\n      paxData: this.formBuilder.array([{\n        noOfAdults: 1,\n        noOfChildren: 0,\n        agesOfChildren: this.formBuilder.array([])\n      }])\n    });\n  }\n\n  addAges(i, index, index1) {\n    console.log(i.target.value, index, index1);\n    var title = index + index1;\n    this.age.delete(index + index1);\n    this.age.set(title, i.target.value);\n    console.log(this.age);\n  }\n\n  getChildrenAgeFormArray(index) {\n    return this.getTablesFormArray().at(index).value.agesOfChildren;\n  }\n\n  getChildrenAgeFormArray_1() {\n    return this.formBuilder.control('');\n  }\n\n  removeAge(i, ind) {\n    this.getChildrenAgeFormArray(i).removeAt(ind);\n  }\n\n  getTablesFormArray() {\n    return this.searchForm.get(\"paxData\");\n  }\n\n  addTablesForm() {\n    console.log(this.getTablesForm());\n    this.getTablesFormArray().push(this.getTablesForm().at(0));\n  }\n\n  removeTable(index) {\n    this.getTablesFormArray().removeAt(index);\n  }\n\n  getTablesForm() {\n    return this.formBuilder.array([{\n      noOfAdults: 1,\n      noOfChildren: 0,\n      agesOfChildren: this.formBuilder.array([])\n    }]);\n  } // getChildrenAgeFormArray(i: number): FormArray {\n  //   return this.searchForm.controls.paxData.value[i].get('agesOfChildren') as FormArray;\n  // }\n  // addAge(data: any, i: number) {\n  //   console.log(data)\n  //   // this.getChildrenAgeFormArray(i).push(data)\n  // }\n\n\n  filterHotel(value) {\n    this.getWithExpiry();\n    if (!value) value = '';\n    let filterValue = value === null || value === void 0 ? void 0 : value.toLowerCase();\n    let filteredArray = this.hotelsList.filter(val => {\n      var _a;\n\n      return ((_a = val.hotel_name) === null || _a === void 0 ? void 0 : _a.toLowerCase().indexOf(filterValue)) > -1;\n    });\n    this.showDropdown = filteredArray.length > 0 ? DropdownType.hotel : DropdownType.none;\n    return filteredArray;\n  }\n\n  filterLocation(value) {\n    this.getWithExpiry();\n    if (!value) value = '';\n    let filterValue = value === null || value === void 0 ? void 0 : value.toLowerCase();\n    let filteredArray = this.locationList.filter(val => {\n      var _a;\n\n      return ((_a = val.key) === null || _a === void 0 ? void 0 : _a.toLowerCase().indexOf(filterValue)) > -1;\n    });\n    this.showDropdown = filteredArray.length > 0 ? DropdownType.location : DropdownType.none;\n    console.log(this.locationList, filteredArray, \"########\");\n    return filteredArray;\n  }\n\n  setWithExpiry(value) {\n    const now = new Date(); // `item` is an object which contains the original value\n    // as well as the time when it's supposed to expire\n\n    const item = {\n      value: value,\n      expiry: now.getTime()\n    };\n    localStorage.setItem('hotel', JSON.stringify(item));\n  }\n\n  getAllHotels() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.searchService.getAllHotels(_this2.searchForm.controls.checkIn.value).toPromise().then(res => {\n        _this2.setWithExpiry(res['Hotel_Details']);\n\n        _this2.getWithExpiry();\n      }).catch(err => console.log(err));\n    })();\n  }\n\n  getWithExpiry() {\n    const itemStr = localStorage.getItem('hotel');\n\n    if (this.flag == null) {\n      this.flag = true;\n    } // if the item doesn't exist, return null\n\n\n    if (!itemStr && this.flag == true) {\n      this.getAllHotels();\n      this.flag = false;\n    }\n\n    let item;\n\n    if (itemStr && this.flag == true) {\n      item = JSON.parse(itemStr);\n      const now = new Date(); // compare the expiry time of the item with the current time\n\n      if (now.getTime() > item.expiry) {\n        // If the item is expired, delete the item from storage\n        // and return null\n        localStorage.removeItem('hotel');\n        this.getAllHotels();\n        this.flag = false;\n      }\n\n      this.hotelsList = item.value;\n      this.getLocationList(item.value);\n      this.isHotelListLoaded = true;\n      return;\n    }\n  }\n\n  getLocationList(val) {\n    val.forEach(e1 => {\n      //Push city if available\n      if (e1.address.city) {\n        let obj1 = {\n          key: e1.address.city,\n          type: 'city',\n          cityId: e1.address.cityId,\n          state: e1.address.state,\n          stateId: e1.address.stateId,\n          country: e1.address.country,\n          countryId: e1.address.countryId\n        };\n        let isFound = false;\n\n        for (let index = 0; index < this.locationList.length; index++) {\n          if (this.locationList[index].key === e1.address.city) {\n            isFound = true;\n            break;\n          }\n        }\n\n        if (!isFound) this.locationList.push(obj1);\n      } //Push state\n\n\n      let obj2 = {\n        key: e1.address.state,\n        type: 'state',\n        stateId: e1.address.stateId,\n        country: e1.address.country,\n        countryId: e1.address.countryId\n      };\n      let isFound = false;\n\n      for (let index = 0; index < this.locationList.length; index++) {\n        if (this.locationList[index].key === e1.address.state) {\n          isFound = true;\n          break;\n        }\n      }\n\n      if (!isFound) this.locationList.push(obj2);\n    });\n  }\n\n  toggleDropdown(type) {\n    this.showDropdown = this.showDropdown != type ? type : DropdownType.none;\n    this.showFieldWarnings = this.dropdownType.none;\n\n    if (type === DropdownType.checkin || type === DropdownType.checkout) {\n      this.updateHeaderText();\n    }\n  }\n\n  changeSearchType(val) {\n    console.log(val);\n    this.searchForm.controls.searchType.setValue(val);\n\n    if (val === 'hotel') {\n      this.searchForm.controls.hotel.setValidators([Validators.required]);\n      this.searchForm.controls.location.setValidators([]);\n    }\n\n    if (val === 'location') {\n      this.searchForm.controls.hotel.setValidators([]);\n      this.searchForm.controls.location.setValidators([Validators.required]);\n    }\n  }\n\n  onHotelFieldEvent(type, event) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (!_this3.isHotelListLoaded) {\n        _this3.getWithExpiry();\n      }\n\n      if (type === 'focus') {\n        _this3.filterHotel(_this3.searchForm.controls.hotel.value);\n\n        _this3.filterLocation(_this3.searchForm.controls.hotel.value);\n      } else if (type === 'keydown') {\n        _this3.filterHotel(_this3.searchForm.controls.hotel.value);\n\n        _this3.filterLocation(_this3.searchForm.controls.hotel.value);\n      }\n    })();\n  }\n\n  onLocationFieldEvent(type, event) {\n    if (!this.isHotelListLoaded) {\n      this.getWithExpiry();\n    }\n\n    if (type === 'focus') {\n      this.filterLocation(this.searchForm.controls.location.value);\n    } else if (type === 'keydown') {\n      this.filterLocation(this.searchForm.controls.location.value);\n    }\n  }\n\n  focusDestinationFieldInput(type) {\n    var _a, _b;\n\n    if (type === 'hotel') {\n      (_a = document.getElementById('hotel-field-input')) === null || _a === void 0 ? void 0 : _a.focus();\n    } else {\n      (_b = document.getElementById('location-field-input')) === null || _b === void 0 ? void 0 : _b.focus();\n    }\n\n    this.showFieldWarnings = this.dropdownType.none;\n  }\n\n  selectHotel(name) {\n    this.searchForm.controls.hotel.setValue(name);\n    setTimeout(() => {\n      var _a;\n\n      (_a = document.getElementById('hotel-field-input')) === null || _a === void 0 ? void 0 : _a.blur();\n      this.showDropdown = DropdownType.none;\n      this.showFieldWarnings = this.dropdownType.none;\n    }, 0);\n    this.showDropdown = this.dropdownType.none;\n  }\n\n  selectLocation(option) {\n    // this.searchForm.controls.status = 'VALID';\n    if (option.type = 'city') {\n      this.searchForm.controls.hotel.setValue(option.key);\n      this.searchForm.controls.cityId.setValue(option.cityId);\n      this.searchForm.controls.searchType.setValue('location');\n    }\n\n    this.searchForm.controls.stateId.setValue(option.stateId);\n    this.searchForm.controls.countryId.setValue(option.countryId);\n    this.searchForm.controls.location.setValue(option.key);\n    setTimeout(() => {\n      var _a;\n\n      (_a = document.getElementById('hotel-field-input')) === null || _a === void 0 ? void 0 : _a.blur();\n      this.showDropdown = DropdownType.none;\n      this.showFieldWarnings = this.dropdownType.none;\n    }, 0);\n    this.showDropdown = this.dropdownType.none;\n  }\n\n  setHotelName(id) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      if (!_this4.isHotelListLoaded) {\n        _this4.getWithExpiry();\n      }\n\n      let hotelName = '';\n\n      for (let i = 0; i < _this4.hotelsList.length; i++) {\n        if (_this4.hotelsList[i].hotel_id === id) {\n          hotelName = _this4.hotelsList[i].hotel_name;\n          break;\n        }\n      }\n\n      _this4.searchForm.controls.hotel.setValue(hotelName);\n    })();\n  }\n\n  setLocation(cityId, stateId) {\n    let location = '';\n\n    for (let index = 0; index < this.locationList.length; index++) {\n      if (cityId) {\n        if (this.locationList[index].cityId === cityId) {\n          location = this.locationList[index]['key'];\n        }\n      } else {\n        if (this.locationList[index].stateId === stateId) {\n          location = this.locationList[index]['key'];\n        }\n      }\n\n      this.searchForm.controls.location.setValue(location);\n    }\n  } //Ages Methods\n  // get agesOfChildren() {\n  //   return this.searchForm.get('agesOfChildren') as FormArray;\n  // }\n  // getChildrensAgeForm() {\n  //   return this.formBuilder.group({\n  //     age: [\n  //       '',\n  //       [\n  //         Validators.required,\n  //         Validators.pattern(/^[0-9]\\d*$/),\n  //         Validators.min(1),\n  //         Validators.max(12),\n  //       ],\n  //     ],\n  //   });\n  // }\n  // updateChildrensAgeForm(type: string) {\n  //   if (type === 'add') {\n  //     this.agesOfChildren.push(this.getChildrensAgeForm());\n  //   } else if (type === 'remove') {\n  //     this.agesOfChildren.removeAt(this.agesOfChildren.length - 1);\n  //   }\n  // }\n\n\n  updateroomCount(type) {\n    if (type === 'decrement') {\n      let current = this.searchForm.controls.rooms.value;\n\n      if (current > 1) {\n        this.searchForm.controls.rooms.setValue(current - 1);\n        this.removeTable(this.searchForm.controls.rooms.value);\n      }\n    } else if (type === 'increment') {\n      let current = this.searchForm.controls.rooms.value;\n      this.searchForm.controls.rooms.setValue(current + 1);\n      this.addTablesForm();\n      console.log(this.searchForm.value);\n    }\n\n    localStorage.removeItem('rooms');\n    localStorage.setItem('rooms', this.searchForm.controls.rooms.value);\n  }\n\n  updateAdultCount(type, i) {\n    if (type === 'decrement') {\n      let current = this.searchForm.controls.paxData.value[i].noOfAdults;\n\n      if (current > 1) {\n        this.searchForm.controls.paxData.value[i].noOfAdults = current - 1;\n        console.log(this.searchForm.controls.paxData);\n      }\n    } else if (type === 'increment') {\n      let current = this.searchForm.controls.paxData.value[i].noOfAdults;\n      this.searchForm.controls.paxData.value[i].noOfAdults = current + 1;\n    }\n  }\n\n  updateChildCount(type, i) {\n    if (type === 'decrement') {\n      let current = this.searchForm.controls.paxData.value[i].noOfChildren;\n\n      if (current > 0) {\n        // this.searchForm.controls.paxData.value[i].noOfChildren.setValue(current - 1);\n        this.searchForm.controls.paxData.value[i].noOfChildren = current - 1;\n        this.removeAge(i, this.searchForm.controls.paxData.value[i].noOfChildren);\n      }\n    } else if (type === 'increment') {\n      let current = this.searchForm.controls.paxData.value[i].noOfChildren;\n\n      if (current < 3) {\n        // this.searchForm.controls.paxData.value[i].noOfChildren.setValue(current + 1);\n        this.searchForm.controls.paxData.value[i].noOfChildren = current + 1;\n        var title = i + current.length + 1;\n        this.age.set(title, 1);\n      }\n    }\n\n    console.log(this.searchForm.value, \"@#$%^&*(\");\n  }\n\n  onSubmit() {\n    console.log(this.searchForm, this.searchForm.valid);\n    this.searchForm.markAllAsTouched();\n    this.showDropdown = this.dropdownType.none; // if(      this.searchForm.controls.searchType.status== \"VALID\" ){\n    //   this.searchForm.valid\n    // }\n\n    if (this.searchForm.controls.searchType.status == \"VALID\") {\n      let prevUrl = this.router.url.toString();\n      let searchParams = this.getSearchParams();\n      searchParams['searchType'] = this.searchForm.controls.searchType.value;\n      this.router.navigate(['/search'], {\n        queryParams: searchParams\n      }).then(res => {\n        if (prevUrl === this.router.url.toString()) this.scrollToSearchView();\n      });\n    } else {\n      if (this.searchForm.controls.hotel.invalid && (this.searchForm.controls.hotel.dirty || this.searchForm.controls.hotel.touched)) {\n        this.showFieldWarnings = this.dropdownType.hotel;\n      } else if (this.searchForm.controls.checkIn.invalid && (this.searchForm.controls.checkIn.dirty || this.searchForm.controls.checkIn.touched)) {\n        this.showFieldWarnings = this.dropdownType.checkin;\n      } else if (this.searchForm.controls.checkOut.invalid && (this.searchForm.controls.checkOut.dirty || this.searchForm.controls.checkOut.touched)) {\n        this.showFieldWarnings = this.dropdownType.checkout;\n      }\n    }\n  }\n\n  fetchSearchResult() {\n    if (this.searchForm.valid) {\n      this.spinner.show();\n      let searchParams = this.getSearchParams();\n      console.log(searchParams, \"searchparams\");\n      this.searchService.searchRooms(searchParams).subscribe(res => {\n        this.searchResponse = res;\n        console.log(this.searchResponse);\n        this.searchId = this.searchResponse['search_id'];\n        this.scrollToSearchView();\n        this.spinner.hide();\n        console.log(this.searchResponse);\n      });\n    }\n  }\n\n  scrollToSearchView() {\n    var element = document.getElementById('searchTitleId');\n    var headerOffset = 250;\n    var elementPosition = element === null || element === void 0 ? void 0 : element.getBoundingClientRect().top;\n\n    if (elementPosition) {\n      var offsetPosition = elementPosition + window.pageYOffset - headerOffset;\n      window.scrollTo({\n        top: offsetPosition,\n        behavior: 'smooth'\n      });\n    }\n  }\n\n  getSearchParams() {\n    var _a, _b, _c;\n\n    let searchParams = {\n      bookingEngineId: this.BookingConfigService.getBookingEngineId(),\n      hotelId: this.BookingConfigService.getBookingEngineId()\n    };\n\n    if (this.getProductId()) {\n      searchParams.productId = this.getProductId();\n    }\n\n    if (((_a = this.searchForm.controls.cityId.value) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n      searchParams.cityId = this.searchForm.controls.cityId.value;\n    } // searchParams.stateId = this.searchForm.controls.stateId.value;\n    // searchParams.countryId = this.searchForm.controls.countryId.value;\n\n\n    if (((_b = this.searchForm.controls.checkIn.value) === null || _b === void 0 ? void 0 : _b.length) > 0) {\n      searchParams.checkIn = this.searchForm.controls.checkIn.value;\n    }\n\n    if (((_c = this.searchForm.controls.checkOut.value) === null || _c === void 0 ? void 0 : _c.length) > 0) {\n      searchParams.checkOut = this.searchForm.controls.checkOut.value;\n    }\n\n    if (this.getPaxInfo()) {\n      searchParams.paxInfo = this.getPaxInfo();\n    } // searchParams.paxInfo = '1'\n    //searchParams.rooms = this.searchForm.controls.rooms.value;\n    //searchParams.rooms = 1;\n\n\n    return searchParams;\n  }\n\n  getProductId() {\n    let productId;\n\n    for (let i = 0; i < this.hotelsList.length; i++) {\n      if (this.hotelsList[i].hotel_name === this.searchForm.controls.hotel.value) {\n        productId = this.hotelsList[i].hotel_id;\n        break;\n      }\n    }\n\n    return productId;\n  }\n\n  getPaxInfo() {\n    let guests = 0;\n    let paxString = '';\n    let aFromArray = this.getTablesFormArray();\n\n    for (let i = 0; i < 1; i++) {\n      paxString += aFromArray.value[i]['noOfAdults'] + '|' + aFromArray.value[i]['noOfChildren'] + '|';\n      guests = Number(guests + aFromArray.value[i]['noOfAdults'] + aFromArray.value[i]['noOfChildren']);\n      let agesFormArray = this.getChildrenAgeFormArray(i);\n      console.log(agesFormArray.controls);\n\n      for (let ii = 0; ii < aFromArray.value[i]['noOfChildren']; ii++) {\n        paxString += +this.age.get(i + ii);\n        paxString += '|';\n      }\n\n      console.log(agesFormArray.controls.length);\n\n      if (!aFromArray.value[i]['noOfChildren']) {\n        paxString += '0|0|';\n      }\n\n      if (aFromArray.value.length > 0) {\n        paxString += \"|\";\n      }\n    }\n\n    localStorage.removeItem('guests');\n    localStorage.setItem('guests', guests.toString());\n    console.log(paxString, \"paxstring\");\n    return paxString;\n  }\n\n  setPaxInfo(paxInfo) {\n    let paxArray = paxInfo ? paxInfo.toString().split('|') : []; // this.agesOfChildren.clear()\n    // paxArray.forEach((e: any, i: number) => {\n    //   if (i === 0) {\n    //     this.searchForm.controls.noOfAdults.setValue(parseInt(e));\n    //   } else if (i > 1) {\n    //     this.agesOfChildren.push(this.getChildrensAgeForm());\n    //     this.agesOfChildren.controls[i - 2].get('age')?.setValue(parseInt(e));\n    //   }\n    // });\n  }\n\n  onChangeMonth(type) {\n    var className = type === 'next' ? 'mat-calendar-next-button' : 'mat-calendar-previous-button';\n    var classes = document.getElementsByClassName(className);\n    var e1 = classes[0];\n    var e2 = classes[1];\n    e1.click();\n    e2.click();\n    this.updateHeaderText();\n  }\n\n  updateHeaderText() {\n    setTimeout(() => {\n      var _a, _b, _c, _d, _e, _f;\n\n      var cl = document.getElementsByClassName('mat-calendar-period-button');\n      this.calendarOneHeading = (_c = (_b = (_a = cl[0]) === null || _a === void 0 ? void 0 : _a.children[0]) === null || _b === void 0 ? void 0 : _b.children[0]) === null || _c === void 0 ? void 0 : _c.textContent;\n      this.calendarTwoHeading = (_f = (_e = (_d = cl[1]) === null || _d === void 0 ? void 0 : _d.children[0]) === null || _e === void 0 ? void 0 : _e.children[0]) === null || _f === void 0 ? void 0 : _f.textContent;\n    }, 0);\n  }\n\n  selectedChange(m) {\n    var _a, _b;\n\n    this.isCurrentCalendarInputCheckout = false;\n\n    if (!((_a = this.selectedRangeValue) === null || _a === void 0 ? void 0 : _a.start) || ((_b = this.selectedRangeValue) === null || _b === void 0 ? void 0 : _b.end)) {\n      if (this.dateRangeSelectionType != 'exact') {\n        let incDays = parseInt(this.dateRangeSelectionType);\n        this.selectedRangeValue = new DateRange(m, this.addDays(m, incDays));\n        this.updateDateSelection('checkin', m);\n        this.updateDateSelection('checkout', this.addDays(m, incDays));\n        this.showDropdown = DropdownType.none;\n      } else {\n        this.selectedRangeValue = new DateRange(m, null);\n        this.updateDateSelection('checkin', m);\n        this.isCurrentCalendarInputCheckout = true;\n      }\n    } else {\n      const start = this.selectedRangeValue.start;\n      const end = m;\n\n      if (end < start) {\n        this.selectedRangeValue = new DateRange(end, start);\n        this.updateDateSelection('checkin', end);\n        this.updateDateSelection('checkout', start);\n      } else {\n        this.selectedRangeValue = new DateRange(start, end);\n        this.updateDateSelection('checkin', start);\n        this.updateDateSelection('checkout', end);\n      }\n\n      this.showDropdown = DropdownType.none;\n    } // if (!this.selectedRangeValue?.end) {\n    //   this.updateDateSelection('checkin', m);\n    // } else {\n    // }\n\n\n    this.selectedRangeValueChange.emit(this.selectedRangeValue);\n  }\n\n  updateDateSelection(type, event) {\n    let date = moment(event).format('DD/MM/YYYY');\n\n    if (type === 'checkin') {\n      this.searchForm.controls.checkIn.setValue(date);\n      this.searchForm.controls.checkOut.setValue(null);\n    } else if (type === 'checkout') {\n      this.searchForm.controls.checkOut.setValue(date);\n    }\n  }\n\n  setDateRangeSelectionType(val) {\n    this.dateRangeSelectionType = val;\n  }\n\n  addDays(date, days) {\n    var result = new Date(date);\n    result.setDate(result.getDate() + days);\n    return result;\n  }\n\n};\n\n__decorate([Input()], SearchComponent.prototype, \"selectedRangeValue\", void 0);\n\n__decorate([Output()], SearchComponent.prototype, \"selectedRangeValueChange\", void 0);\n\nSearchComponent = __decorate([Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.css']\n})], SearchComponent);\nexport { SearchComponent };","map":{"version":3,"sources":["/home/dileep/workspace/cgh-Booking-engine/src/app/pages/search/search.component.ts"],"names":["__decorate","Component","EventEmitter","Input","Output","Validators","debounceTime","map","startWith","moment","DateRange","DropdownType","formatDate","SearchComponent","constructor","searchService","formBuilder","activatedRoute","router","spinner","dealsService","bookingService","BookingConfigService","dropdownType","age","Map","agesArray","hotelsList","locationList","bookingItems","clearFormArray","formArray","array","selectedRangeValueChange","now","Date","secondCalStartDate","getFullYear","getMonth","dateRangeSelectionType","ngOnInit","bookingCart$","subscribe","res","cartflag","minDate","searchForm","getsearchForm","console","log","value","controls","paxData","noOfAdults","getWithExpiry","filteredHotelsList","hotel","valueChanges","pipe","filterHotel","filteredLocationList","filterLocation","activateRouteSubscription$","queryParams","localStorage","removeItem","roomCount","checkIn","setValue","checkOut","cityId","stateId","countryId","searchType","setHotelName","parseInt","setLocation","setPaxInfo","fetchSearchResult","rooms","Number","getItem","ngOnDestroy","_a","searchTypeControlSubscription","unsubscribe","dt","tomorrow","setDate","getDate","dtTom","group","location","required","agesOfChildren","noOfChildren","addAges","i","index","index1","target","title","delete","set","getChildrenAgeFormArray","getTablesFormArray","at","getChildrenAgeFormArray_1","control","removeAge","ind","removeAt","get","addTablesForm","getTablesForm","push","removeTable","filterValue","toLowerCase","filteredArray","filter","val","hotel_name","indexOf","showDropdown","length","none","key","setWithExpiry","item","expiry","getTime","setItem","JSON","stringify","getAllHotels","toPromise","then","catch","err","itemStr","flag","parse","getLocationList","isHotelListLoaded","forEach","e1","address","city","obj1","type","state","country","isFound","obj2","toggleDropdown","showFieldWarnings","checkin","checkout","updateHeaderText","changeSearchType","setValidators","onHotelFieldEvent","event","onLocationFieldEvent","focusDestinationFieldInput","_b","document","getElementById","focus","selectHotel","name","setTimeout","blur","selectLocation","option","id","hotelName","hotel_id","updateroomCount","current","updateAdultCount","updateChildCount","onSubmit","valid","markAllAsTouched","status","prevUrl","url","toString","searchParams","getSearchParams","navigate","scrollToSearchView","invalid","dirty","touched","show","searchRooms","searchResponse","searchId","hide","element","headerOffset","elementPosition","getBoundingClientRect","top","offsetPosition","window","pageYOffset","scrollTo","behavior","_c","bookingEngineId","getBookingEngineId","hotelId","getProductId","productId","getPaxInfo","paxInfo","guests","paxString","aFromArray","agesFormArray","ii","paxArray","split","onChangeMonth","className","classes","getElementsByClassName","e2","click","_d","_e","_f","cl","calendarOneHeading","children","textContent","calendarTwoHeading","selectedChange","m","isCurrentCalendarInputCheckout","selectedRangeValue","start","end","incDays","addDays","updateDateSelection","emit","date","format","setDateRangeSelectionType","days","result","prototype","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Input, Output, } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { debounceTime, map, startWith } from 'rxjs/operators';\nimport * as moment from 'moment';\nimport { DateRange } from '@angular/material/datepicker';\nimport { DropdownType } from 'src/app/shared/models/dropdown-type';\nimport { formatDate } from '@angular/common';\nlet SearchComponent = class SearchComponent {\n    constructor(searchService, formBuilder, activatedRoute, router, spinner, dealsService, bookingService, BookingConfigService) {\n        this.searchService = searchService;\n        this.formBuilder = formBuilder;\n        this.activatedRoute = activatedRoute;\n        this.router = router;\n        this.spinner = spinner;\n        this.dealsService = dealsService;\n        this.bookingService = bookingService;\n        this.BookingConfigService = BookingConfigService;\n        this.dropdownType = DropdownType;\n        this.age = new Map();\n        this.agesArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17];\n        this.hotelsList = [];\n        this.locationList = [];\n        this.bookingItems = [];\n        this.clearFormArray = (formArray) => {\n            formArray = this.formBuilder.array([]);\n        };\n        this.selectedRangeValueChange = new EventEmitter();\n        this.now = new Date();\n        this.secondCalStartDate = new Date(this.now.getFullYear(), this.now.getMonth() + 1, 1);\n        this.dateRangeSelectionType = 'exact';\n    }\n    ngOnInit() {\n        this.bookingCart$ = this.bookingService.bookingCart$;\n        this.bookingCart$.subscribe(res => {\n            this.bookingItems = res === null || res === void 0 ? void 0 : res.bookingItems;\n        });\n        this.bookingService.cartflag = false;\n        this.minDate = new Date();\n        this.searchForm = this.getsearchForm();\n        console.log(this.searchForm.value, this.searchForm.controls.paxData.value[0].noOfAdults);\n        this.getWithExpiry();\n        console.log(this.searchForm, \"searchform\");\n        this.filteredHotelsList = this.searchForm.controls.hotel.valueChanges.pipe(startWith(''), map((value) => this.filterHotel(value)));\n        this.filteredLocationList =\n            this.searchForm.controls.hotel.valueChanges.pipe(startWith(''), map((value) => this.filterLocation(value)));\n        this.activateRouteSubscription$ = this.activatedRoute.queryParams.pipe(debounceTime(300)).subscribe(async (queryParams) => {\n            if (!queryParams['checkIn']) {\n                localStorage.removeItem('reflectStore');\n            }\n            if (queryParams['checkIn']) {\n                this.roomCount = queryParams['rooms'];\n                this.searchForm.controls.checkIn.setValue(queryParams['checkIn']);\n                this.searchForm.controls.checkOut.setValue(queryParams['checkOut']);\n                this.searchForm.controls.cityId.setValue(queryParams['cityId'] || '');\n                this.searchForm.controls.stateId.setValue(queryParams['stateId']);\n                this.searchForm.controls.countryId.setValue(queryParams['countryId']);\n                this.searchForm.controls.searchType.setValue(queryParams['searchType'] || 'hotel');\n                await this.setHotelName(parseInt(queryParams['productId']));\n                this.setLocation(queryParams['cityId'], queryParams['stateId']);\n                this.setPaxInfo(queryParams['paxInfo']);\n                this.fetchSearchResult();\n                this.searchForm.controls.rooms.setValue(Number(localStorage.getItem('rooms')));\n            }\n        });\n    }\n    // increment() {\n    //   // this.roomCount++\n    //   // this.roomCountChanged()\n    //   let current = this.searchForm.controls.rooms.value;\n    //   this.searchForm.controls.rooms.setValue(current + 1);\n    //   this.roomCount = this.searchForm.controls.rooms.value\n    // }\n    // decrement() {\n    //   // if (this.roomCount > 1) {\n    //   //   this.roomCount--\n    //   //   this.roomCountChanged()\n    //   // }\n    //   let current = this.searchForm.controls.rooms.value;\n    //   if (current > 1) {\n    //     this.searchForm.controls.rooms.setValue(current - 1);\n    //     this.roomCount = this.searchForm.controls.rooms.value\n    //   }\n    // }\n    // roomCountChanged() {\n    //   this.data = []\n    //   for (var i = 0; i < this.roomCount; i++) {\n    //     this.data.push({\n    //       numOfAdults: 0,\n    //       numOfChildren: 0,\n    //       childAges: []\n    //     })\n    //   }\n    // }\n    // adultCountChanged(index: number, value: any) {\n    //   this.data[index].numOfAdults = parseFloat(value)\n    // }\n    // childCountChanged(index: number, value: any) {\n    //   this.data[index].numOfChildren = parseFloat(value)\n    //   this.data[index].childAges = []\n    //   for (var i = 0; i < value; i++) {\n    //     this.data[index].childAges.push(0)\n    //   }\n    // }\n    // onChildAgeChange(roomIndex: any, childIndex: any, value: any) {\n    //   //console.log(roomIndex, childIndex, value)\n    //   this.data[roomIndex].childAges[childIndex] = parseFloat(value)\n    //   //console.log(this.data)\n    // }\n    // incrementAdult(room: { numOfAdults: number; }) {\n    //   room.numOfAdults++\n    // }\n    // decrementAdult(room: { numOfAdults: number; }) {\n    //   if (room.numOfAdults > 1) {\n    //     room.numOfAdults--\n    //   }\n    // }\n    // incrementChild(room: { numOfChildren: number; childAges: number[]; }) {\n    //   room.numOfChildren++\n    //   room.childAges = []\n    //   for (var i = 0; i < room.numOfChildren; i++) {\n    //     room.childAges.push(0)\n    //   }\n    // }\n    // decrementChild(room: { numOfChildren: number; childAges: number[]; }) {\n    //   if (room.numOfChildren > 0) {\n    //     room.numOfChildren--\n    //     room.childAges = []\n    //     for (var i = 0; i < room.numOfChildren; i++) {\n    //       room.childAges.push(0)\n    //     }\n    //   }\n    // }\n    ngOnDestroy() {\n        var _a;\n        (_a = this.searchTypeControlSubscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n    }\n    getsearchForm() {\n        let dt = formatDate(new Date(), 'dd/MM/yyyy', 'en');\n        const tomorrow = new Date();\n        tomorrow.setDate(tomorrow.getDate() + 1);\n        let dtTom = formatDate(tomorrow, 'dd/MM/yyyy', 'en');\n        console.log(dtTom);\n        return this.formBuilder.group({\n            searchType: [],\n            hotel: [''],\n            location: [''],\n            cityId: [''],\n            stateId: [''],\n            countryId: [''],\n            checkIn: [dt, Validators.required],\n            checkOut: [dtTom, Validators.required],\n            noOfAdults: [1],\n            agesOfChildren: this.formBuilder.array([]),\n            rooms: [1],\n            paxData: this.formBuilder.array([{\n                    noOfAdults: 1,\n                    noOfChildren: 0,\n                    agesOfChildren: this.formBuilder.array([])\n                }]),\n        });\n    }\n    addAges(i, index, index1) {\n        console.log(i.target.value, index, index1);\n        var title = index + index1;\n        this.age.delete(index + index1);\n        this.age.set(title, i.target.value);\n        console.log(this.age);\n    }\n    getChildrenAgeFormArray(index) {\n        return this.getTablesFormArray().at(index).value.agesOfChildren;\n    }\n    getChildrenAgeFormArray_1() {\n        return this.formBuilder.control('');\n    }\n    removeAge(i, ind) {\n        this.getChildrenAgeFormArray(i).removeAt(ind);\n    }\n    getTablesFormArray() {\n        return this.searchForm.get(\"paxData\");\n    }\n    addTablesForm() {\n        console.log(this.getTablesForm());\n        this.getTablesFormArray().push(this.getTablesForm().at(0));\n    }\n    removeTable(index) {\n        this.getTablesFormArray().removeAt(index);\n    }\n    getTablesForm() {\n        return this.formBuilder.array([{\n                noOfAdults: 1,\n                noOfChildren: 0,\n                agesOfChildren: this.formBuilder.array([])\n            }]);\n    }\n    // getChildrenAgeFormArray(i: number): FormArray {\n    //   return this.searchForm.controls.paxData.value[i].get('agesOfChildren') as FormArray;\n    // }\n    // addAge(data: any, i: number) {\n    //   console.log(data)\n    //   // this.getChildrenAgeFormArray(i).push(data)\n    // }\n    filterHotel(value) {\n        this.getWithExpiry();\n        if (!value)\n            value = '';\n        let filterValue = value === null || value === void 0 ? void 0 : value.toLowerCase();\n        let filteredArray = this.hotelsList.filter((val) => { var _a; return ((_a = val.hotel_name) === null || _a === void 0 ? void 0 : _a.toLowerCase().indexOf(filterValue)) > -1; });\n        this.showDropdown =\n            filteredArray.length > 0 ? DropdownType.hotel : DropdownType.none;\n        return filteredArray;\n    }\n    filterLocation(value) {\n        this.getWithExpiry();\n        if (!value)\n            value = '';\n        let filterValue = value === null || value === void 0 ? void 0 : value.toLowerCase();\n        let filteredArray = this.locationList.filter((val) => { var _a; return ((_a = val.key) === null || _a === void 0 ? void 0 : _a.toLowerCase().indexOf(filterValue)) > -1; });\n        this.showDropdown =\n            filteredArray.length > 0 ? DropdownType.location : DropdownType.none;\n        console.log(this.locationList, filteredArray, \"########\");\n        return filteredArray;\n    }\n    setWithExpiry(value) {\n        const now = new Date();\n        // `item` is an object which contains the original value\n        // as well as the time when it's supposed to expire\n        const item = {\n            value: value,\n            expiry: now.getTime(),\n        };\n        localStorage.setItem('hotel', JSON.stringify(item));\n    }\n    async getAllHotels() {\n        await this.searchService\n            .getAllHotels(this.searchForm.controls.checkIn.value)\n            .toPromise()\n            .then((res) => {\n            this.setWithExpiry(res['Hotel_Details']);\n            this.getWithExpiry();\n        })\n            .catch((err) => console.log(err));\n    }\n    getWithExpiry() {\n        const itemStr = localStorage.getItem('hotel');\n        if (this.flag == null) {\n            this.flag = true;\n        }\n        // if the item doesn't exist, return null\n        if (!itemStr && this.flag == true) {\n            this.getAllHotels();\n            this.flag = false;\n        }\n        let item;\n        if (itemStr && this.flag == true) {\n            item = JSON.parse(itemStr);\n            const now = new Date();\n            // compare the expiry time of the item with the current time\n            if (now.getTime() > item.expiry) {\n                // If the item is expired, delete the item from storage\n                // and return null\n                localStorage.removeItem('hotel');\n                this.getAllHotels();\n                this.flag = false;\n            }\n            this.hotelsList = item.value;\n            this.getLocationList(item.value);\n            this.isHotelListLoaded = true;\n            return;\n        }\n    }\n    getLocationList(val) {\n        val.forEach((e1) => {\n            //Push city if available\n            if (e1.address.city) {\n                let obj1 = {\n                    key: e1.address.city,\n                    type: 'city',\n                    cityId: e1.address.cityId,\n                    state: e1.address.state,\n                    stateId: e1.address.stateId,\n                    country: e1.address.country,\n                    countryId: e1.address.countryId,\n                };\n                let isFound = false;\n                for (let index = 0; index < this.locationList.length; index++) {\n                    if (this.locationList[index].key === e1.address.city) {\n                        isFound = true;\n                        break;\n                    }\n                }\n                if (!isFound)\n                    this.locationList.push(obj1);\n            }\n            //Push state\n            let obj2 = {\n                key: e1.address.state,\n                type: 'state',\n                stateId: e1.address.stateId,\n                country: e1.address.country,\n                countryId: e1.address.countryId,\n            };\n            let isFound = false;\n            for (let index = 0; index < this.locationList.length; index++) {\n                if (this.locationList[index].key === e1.address.state) {\n                    isFound = true;\n                    break;\n                }\n            }\n            if (!isFound)\n                this.locationList.push(obj2);\n        });\n    }\n    toggleDropdown(type) {\n        this.showDropdown = this.showDropdown != type ? type : DropdownType.none;\n        this.showFieldWarnings = this.dropdownType.none;\n        if (type === DropdownType.checkin || type === DropdownType.checkout) {\n            this.updateHeaderText();\n        }\n    }\n    changeSearchType(val) {\n        console.log(val);\n        this.searchForm.controls.searchType.setValue(val);\n        if (val === 'hotel') {\n            this.searchForm.controls.hotel.setValidators([Validators.required]);\n            this.searchForm.controls.location.setValidators([]);\n        }\n        if (val === 'location') {\n            this.searchForm.controls.hotel.setValidators([]);\n            this.searchForm.controls.location.setValidators([Validators.required]);\n        }\n    }\n    async onHotelFieldEvent(type, event) {\n        if (!this.isHotelListLoaded) {\n            this.getWithExpiry();\n        }\n        if (type === 'focus') {\n            this.filterHotel(this.searchForm.controls.hotel.value);\n            this.filterLocation(this.searchForm.controls.hotel.value);\n        }\n        else if (type === 'keydown') {\n            this.filterHotel(this.searchForm.controls.hotel.value);\n            this.filterLocation(this.searchForm.controls.hotel.value);\n        }\n    }\n    onLocationFieldEvent(type, event) {\n        if (!this.isHotelListLoaded) {\n            this.getWithExpiry();\n        }\n        if (type === 'focus') {\n            this.filterLocation(this.searchForm.controls.location.value);\n        }\n        else if (type === 'keydown') {\n            this.filterLocation(this.searchForm.controls.location.value);\n        }\n    }\n    focusDestinationFieldInput(type) {\n        var _a, _b;\n        if (type === 'hotel') {\n            (_a = document.getElementById('hotel-field-input')) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n        else {\n            (_b = document.getElementById('location-field-input')) === null || _b === void 0 ? void 0 : _b.focus();\n        }\n        this.showFieldWarnings = this.dropdownType.none;\n    }\n    selectHotel(name) {\n        this.searchForm.controls.hotel.setValue(name);\n        setTimeout(() => {\n            var _a;\n            (_a = document.getElementById('hotel-field-input')) === null || _a === void 0 ? void 0 : _a.blur();\n            this.showDropdown = DropdownType.none;\n            this.showFieldWarnings = this.dropdownType.none;\n        }, 0);\n        this.showDropdown = this.dropdownType.none;\n    }\n    selectLocation(option) {\n        // this.searchForm.controls.status = 'VALID';\n        if ((option.type = 'city')) {\n            this.searchForm.controls.hotel.setValue(option.key);\n            this.searchForm.controls.cityId.setValue(option.cityId);\n            this.searchForm.controls.searchType.setValue('location');\n        }\n        this.searchForm.controls.stateId.setValue(option.stateId);\n        this.searchForm.controls.countryId.setValue(option.countryId);\n        this.searchForm.controls.location.setValue(option.key);\n        setTimeout(() => {\n            var _a;\n            (_a = document.getElementById('hotel-field-input')) === null || _a === void 0 ? void 0 : _a.blur();\n            this.showDropdown = DropdownType.none;\n            this.showFieldWarnings = this.dropdownType.none;\n        }, 0);\n        this.showDropdown = this.dropdownType.none;\n    }\n    async setHotelName(id) {\n        if (!this.isHotelListLoaded) {\n            this.getWithExpiry();\n        }\n        let hotelName = '';\n        for (let i = 0; i < this.hotelsList.length; i++) {\n            if (this.hotelsList[i].hotel_id === id) {\n                hotelName = this.hotelsList[i].hotel_name;\n                break;\n            }\n        }\n        this.searchForm.controls.hotel.setValue(hotelName);\n    }\n    setLocation(cityId, stateId) {\n        let location = '';\n        for (let index = 0; index < this.locationList.length; index++) {\n            if (cityId) {\n                if (this.locationList[index].cityId === cityId) {\n                    location = this.locationList[index]['key'];\n                }\n            }\n            else {\n                if (this.locationList[index].stateId === stateId) {\n                    location = this.locationList[index]['key'];\n                }\n            }\n            this.searchForm.controls.location.setValue(location);\n        }\n    }\n    //Ages Methods\n    // get agesOfChildren() {\n    //   return this.searchForm.get('agesOfChildren') as FormArray;\n    // }\n    // getChildrensAgeForm() {\n    //   return this.formBuilder.group({\n    //     age: [\n    //       '',\n    //       [\n    //         Validators.required,\n    //         Validators.pattern(/^[0-9]\\d*$/),\n    //         Validators.min(1),\n    //         Validators.max(12),\n    //       ],\n    //     ],\n    //   });\n    // }\n    // updateChildrensAgeForm(type: string) {\n    //   if (type === 'add') {\n    //     this.agesOfChildren.push(this.getChildrensAgeForm());\n    //   } else if (type === 'remove') {\n    //     this.agesOfChildren.removeAt(this.agesOfChildren.length - 1);\n    //   }\n    // }\n    updateroomCount(type) {\n        if (type === 'decrement') {\n            let current = this.searchForm.controls.rooms.value;\n            if (current > 1) {\n                this.searchForm.controls.rooms.setValue(current - 1);\n                this.removeTable(this.searchForm.controls.rooms.value);\n            }\n        }\n        else if (type === 'increment') {\n            let current = this.searchForm.controls.rooms.value;\n            this.searchForm.controls.rooms.setValue(current + 1);\n            this.addTablesForm();\n            console.log(this.searchForm.value);\n        }\n        localStorage.removeItem('rooms');\n        localStorage.setItem('rooms', this.searchForm.controls.rooms.value);\n    }\n    updateAdultCount(type, i) {\n        if (type === 'decrement') {\n            let current = this.searchForm.controls.paxData.value[i].noOfAdults;\n            if (current > 1) {\n                this.searchForm.controls.paxData.value[i].noOfAdults = current - 1;\n                console.log(this.searchForm.controls.paxData);\n            }\n        }\n        else if (type === 'increment') {\n            let current = this.searchForm.controls.paxData.value[i].noOfAdults;\n            this.searchForm.controls.paxData.value[i].noOfAdults = current + 1;\n        }\n    }\n    updateChildCount(type, i) {\n        if (type === 'decrement') {\n            let current = this.searchForm.controls.paxData.value[i].noOfChildren;\n            if (current > 0) {\n                // this.searchForm.controls.paxData.value[i].noOfChildren.setValue(current - 1);\n                this.searchForm.controls.paxData.value[i].noOfChildren = current - 1;\n                this.removeAge(i, this.searchForm.controls.paxData.value[i].noOfChildren);\n            }\n        }\n        else if (type === 'increment') {\n            let current = this.searchForm.controls.paxData.value[i].noOfChildren;\n            if (current < 3) {\n                // this.searchForm.controls.paxData.value[i].noOfChildren.setValue(current + 1);\n                this.searchForm.controls.paxData.value[i].noOfChildren = current + 1;\n                var title = i + current.length + 1;\n                this.age.set(title, 1);\n            }\n        }\n        console.log(this.searchForm.value, \"@#$%^&*(\");\n    }\n    onSubmit() {\n        console.log(this.searchForm, this.searchForm.valid);\n        this.searchForm.markAllAsTouched();\n        this.showDropdown = this.dropdownType.none;\n        // if(      this.searchForm.controls.searchType.status== \"VALID\" ){\n        //   this.searchForm.valid\n        // }\n        if (this.searchForm.controls.searchType.status == \"VALID\") {\n            let prevUrl = this.router.url.toString();\n            let searchParams = this.getSearchParams();\n            searchParams['searchType'] = this.searchForm.controls.searchType.value;\n            this.router\n                .navigate(['/search'], { queryParams: searchParams })\n                .then((res) => {\n                if (prevUrl === this.router.url.toString())\n                    this.scrollToSearchView();\n            });\n        }\n        else {\n            if (this.searchForm.controls.hotel.invalid &&\n                (this.searchForm.controls.hotel.dirty ||\n                    this.searchForm.controls.hotel.touched)) {\n                this.showFieldWarnings = this.dropdownType.hotel;\n            }\n            else if (this.searchForm.controls.checkIn.invalid &&\n                (this.searchForm.controls.checkIn.dirty ||\n                    this.searchForm.controls.checkIn.touched)) {\n                this.showFieldWarnings = this.dropdownType.checkin;\n            }\n            else if (this.searchForm.controls.checkOut.invalid &&\n                (this.searchForm.controls.checkOut.dirty ||\n                    this.searchForm.controls.checkOut.touched)) {\n                this.showFieldWarnings = this.dropdownType.checkout;\n            }\n        }\n    }\n    fetchSearchResult() {\n        if (this.searchForm.valid) {\n            this.spinner.show();\n            let searchParams = this.getSearchParams();\n            console.log(searchParams, \"searchparams\");\n            this.searchService.searchRooms(searchParams).subscribe((res) => {\n                this.searchResponse = res;\n                console.log(this.searchResponse);\n                this.searchId = this.searchResponse['search_id'];\n                this.scrollToSearchView();\n                this.spinner.hide();\n                console.log(this.searchResponse);\n            });\n        }\n    }\n    scrollToSearchView() {\n        var element = document.getElementById('searchTitleId');\n        var headerOffset = 250;\n        var elementPosition = element === null || element === void 0 ? void 0 : element.getBoundingClientRect().top;\n        if (elementPosition) {\n            var offsetPosition = elementPosition + window.pageYOffset - headerOffset;\n            window.scrollTo({\n                top: offsetPosition,\n                behavior: 'smooth',\n            });\n        }\n    }\n    getSearchParams() {\n        var _a, _b, _c;\n        let searchParams = {\n            bookingEngineId: this.BookingConfigService.getBookingEngineId(),\n            hotelId: this.BookingConfigService.getBookingEngineId()\n        };\n        if (this.getProductId()) {\n            searchParams.productId = this.getProductId();\n        }\n        if (((_a = this.searchForm.controls.cityId.value) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n            searchParams.cityId = this.searchForm.controls.cityId.value;\n        }\n        // searchParams.stateId = this.searchForm.controls.stateId.value;\n        // searchParams.countryId = this.searchForm.controls.countryId.value;\n        if (((_b = this.searchForm.controls.checkIn.value) === null || _b === void 0 ? void 0 : _b.length) > 0) {\n            searchParams.checkIn = this.searchForm.controls.checkIn.value;\n        }\n        if (((_c = this.searchForm.controls.checkOut.value) === null || _c === void 0 ? void 0 : _c.length) > 0) {\n            searchParams.checkOut = this.searchForm.controls.checkOut.value;\n        }\n        if (this.getPaxInfo()) {\n            searchParams.paxInfo = this.getPaxInfo();\n        }\n        // searchParams.paxInfo = '1'\n        //searchParams.rooms = this.searchForm.controls.rooms.value;\n        //searchParams.rooms = 1;\n        return searchParams;\n    }\n    getProductId() {\n        let productId;\n        for (let i = 0; i < this.hotelsList.length; i++) {\n            if (this.hotelsList[i].hotel_name === this.searchForm.controls.hotel.value) {\n                productId = this.hotelsList[i].hotel_id;\n                break;\n            }\n        }\n        return productId;\n    }\n    getPaxInfo() {\n        let guests = 0;\n        let paxString = '';\n        let aFromArray = this.getTablesFormArray();\n        for (let i = 0; i < 1; i++) {\n            paxString += aFromArray.value[i]['noOfAdults'] + '|' + aFromArray.value[i]['noOfChildren'] + '|';\n            guests = Number(guests + aFromArray.value[i]['noOfAdults'] + aFromArray.value[i]['noOfChildren']);\n            let agesFormArray = this.getChildrenAgeFormArray(i);\n            console.log(agesFormArray.controls);\n            for (let ii = 0; ii < aFromArray.value[i]['noOfChildren']; ii++) {\n                paxString += +this.age.get(i + ii);\n                paxString += '|';\n            }\n            console.log(agesFormArray.controls.length);\n            if (!aFromArray.value[i]['noOfChildren']) {\n                paxString += '0|0|';\n            }\n            if (aFromArray.value.length > 0) {\n                paxString += \"|\";\n            }\n        }\n        localStorage.removeItem('guests');\n        localStorage.setItem('guests', guests.toString());\n        console.log(paxString, \"paxstring\");\n        return paxString;\n    }\n    setPaxInfo(paxInfo) {\n        let paxArray = paxInfo ? paxInfo.toString().split('|') : [];\n        // this.agesOfChildren.clear()\n        // paxArray.forEach((e: any, i: number) => {\n        //   if (i === 0) {\n        //     this.searchForm.controls.noOfAdults.setValue(parseInt(e));\n        //   } else if (i > 1) {\n        //     this.agesOfChildren.push(this.getChildrensAgeForm());\n        //     this.agesOfChildren.controls[i - 2].get('age')?.setValue(parseInt(e));\n        //   }\n        // });\n    }\n    onChangeMonth(type) {\n        var className = type === 'next'\n            ? 'mat-calendar-next-button'\n            : 'mat-calendar-previous-button';\n        var classes = document.getElementsByClassName(className);\n        var e1 = classes[0];\n        var e2 = classes[1];\n        e1.click();\n        e2.click();\n        this.updateHeaderText();\n    }\n    updateHeaderText() {\n        setTimeout(() => {\n            var _a, _b, _c, _d, _e, _f;\n            var cl = document.getElementsByClassName('mat-calendar-period-button');\n            this.calendarOneHeading = (_c = (_b = (_a = cl[0]) === null || _a === void 0 ? void 0 : _a.children[0]) === null || _b === void 0 ? void 0 : _b.children[0]) === null || _c === void 0 ? void 0 : _c.textContent;\n            this.calendarTwoHeading = (_f = (_e = (_d = cl[1]) === null || _d === void 0 ? void 0 : _d.children[0]) === null || _e === void 0 ? void 0 : _e.children[0]) === null || _f === void 0 ? void 0 : _f.textContent;\n        }, 0);\n    }\n    selectedChange(m) {\n        var _a, _b;\n        this.isCurrentCalendarInputCheckout = false;\n        if (!((_a = this.selectedRangeValue) === null || _a === void 0 ? void 0 : _a.start) || ((_b = this.selectedRangeValue) === null || _b === void 0 ? void 0 : _b.end)) {\n            if (this.dateRangeSelectionType != 'exact') {\n                let incDays = parseInt(this.dateRangeSelectionType);\n                this.selectedRangeValue = new DateRange(m, this.addDays(m, incDays));\n                this.updateDateSelection('checkin', m);\n                this.updateDateSelection('checkout', this.addDays(m, incDays));\n                this.showDropdown = DropdownType.none;\n            }\n            else {\n                this.selectedRangeValue = new DateRange(m, null);\n                this.updateDateSelection('checkin', m);\n                this.isCurrentCalendarInputCheckout = true;\n            }\n        }\n        else {\n            const start = this.selectedRangeValue.start;\n            const end = m;\n            if (end < start) {\n                this.selectedRangeValue = new DateRange(end, start);\n                this.updateDateSelection('checkin', end);\n                this.updateDateSelection('checkout', start);\n            }\n            else {\n                this.selectedRangeValue = new DateRange(start, end);\n                this.updateDateSelection('checkin', start);\n                this.updateDateSelection('checkout', end);\n            }\n            this.showDropdown = DropdownType.none;\n        }\n        // if (!this.selectedRangeValue?.end) {\n        //   this.updateDateSelection('checkin', m);\n        // } else {\n        // }\n        this.selectedRangeValueChange.emit(this.selectedRangeValue);\n    }\n    updateDateSelection(type, event) {\n        let date = moment(event).format('DD/MM/YYYY');\n        if (type === 'checkin') {\n            this.searchForm.controls.checkIn.setValue(date);\n            this.searchForm.controls.checkOut.setValue(null);\n        }\n        else if (type === 'checkout') {\n            this.searchForm.controls.checkOut.setValue(date);\n        }\n    }\n    setDateRangeSelectionType(val) {\n        this.dateRangeSelectionType = val;\n    }\n    addDays(date, days) {\n        var result = new Date(date);\n        result.setDate(result.getDate() + days);\n        return result;\n    }\n};\n__decorate([\n    Input()\n], SearchComponent.prototype, \"selectedRangeValue\", void 0);\n__decorate([\n    Output()\n], SearchComponent.prototype, \"selectedRangeValueChange\", void 0);\nSearchComponent = __decorate([\n    Component({\n        selector: 'app-search',\n        templateUrl: './search.component.html',\n        styleUrls: ['./search.component.css'],\n    })\n], SearchComponent);\nexport { SearchComponent };\n"]},"metadata":{},"sourceType":"module"}